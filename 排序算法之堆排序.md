---
title: 排序算法之堆排序
tags:
  - 算法
  - 排序
categories:
  - 算法
date: 2018-01-08 14:32:34
comments: false

---

# 基础概念 #

## 完全二叉树 ##

完全二叉树(Complete Binary Tree)：若设二叉树的深度为h，除第 h 层外，其它各层 (1～h-1) 的结点数都达到最大个数，第 h 层所有的结点都连续集中在最左边，这就是完全二叉树。

## 堆 ##

堆总是满足以下两个特性：

- 堆是一棵完全二叉树。
- 堆中每个结点的值总是不大于（或不小于）其子结点的值。

其中，每个结点的值总是不大于其子结点的值，这种堆成为**小根堆**。
每个结点的值总是不小于其子结点的值，这种堆称为**大根堆**。

因此，对于一个大根堆R来说，对于元素R[i]（i为元素位置，从0开始）有：

- 它的左孩子结点为：R[2\*i+1]。
- 它的右孩子结点为：R[2\*i+2]。
- 它的父结点为：R[(i-1)/2]。
- R[i]>=R[2\*i+1] 且 R[i]>=R[2\*i+2]

# 排序思想 #

根据堆的性质可知：根结点是最大（或最小）的结点。
因此，对于一个待排序数组可以对数组构造出一个大顶堆，然后将去除最大值的数组再次构造大顶堆，直到待排序序列剩下一个元素为止。

根据上述，排序过程可总结为如下两个操作：

1. 将数组构造成一个大顶堆。
2. 交换第一个（堆的根节点）和最后一个元素（堆上最后一层最右的叶子结点）即把大的元素放到数组最后。然后在将去除最后一个元素的数组重新构造大顶堆。

重复上面两个操作，直到堆中只剩下一个结点。

# 构造大顶堆 #

## 构造步骤 ##

在一个完全二叉树上，对于任意结点R[i]，对以R[i]为根结点的树进行以下操作：

1. 取R[i]的子结点中较大的结点R[2\*i+1]（此处假设左结点大于右结点）。
2. 交换R[i]和R[2\*i+1]。

然后以R[2\*i+1]为根结点，重复上述步骤，直到根节点成为叶子结点。
结束后，以R[i]为根结点的树即为一个大顶堆。


## 构造示例 ##

源码地址：
https://github.com/zhangyihao/Algorithms/blob/master/com.zhangyihao.algorithms/src/com/zhangyihao/algorithms/sort/HeapSort.java